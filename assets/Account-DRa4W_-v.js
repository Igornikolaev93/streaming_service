import{d as F,u as b,r as v,c as _,l as V,a as o,o as i,b as s,p as C,n as h,F as H,e as Z,t as u,j as w,g as B,w as U,_ as A}from"./index-CL-Xs5cY.js";const E={class:"account-page"},I={key:0,class:"wrapper"},N={class:"wrapper__title"},S={key:0,class:"tab-content"},T={key:0,class:"favorites-grid"},$=["onClick"],j={class:"movie-poster"},z=["src","alt"],D=["onClick"],G={key:1,class:"empty-favorites"},J={key:1,class:"tab-content"},O={class:"wrapper__description"},P={class:"wrapper__description_item"},R={class:"user-avatar"},q={class:"avatar"},K={class:"wrapper__description_info"},Q={class:"wrapper__description_item"},W={class:"wrapper__description_info"},X={key:1,class:"loading"},Y={key:2,class:"error"},ss=["disabled"],ts=F({__name:"Account",setup(es){const r=b(),c=B(),a=v(null),l=v(!0),d=v("favorites"),p=_(()=>r.favorites),g=e=>{r.removeFromFavorites(e)},f=e=>{c.push(`/movie/${e}`)},m=()=>{c.push("/")},k=e=>{const t=e.target;t.src="https://via.placeholder.com/300x450/2D3748/FFFFFF?text=No+Image"},x=async()=>{try{l.value=!0;const e=await fetch("https://cinemaguide.skillbox.cc/profile",{method:"GET",credentials:"include"});if(e.ok){const t=await e.json();a.value=t,r.setCurrentUser(t),localStorage.setItem("currentUser",JSON.stringify(t))}else r.setAuthorization(!1),c.push("/login")}catch(e){console.error("Error fetching user profile:",e),r.setAuthorization(!1),c.push("/login")}finally{l.value=!1}},y=async()=>{l.value=!0,await r.logout(),c.push("/"),l.value=!1};V(()=>{x()});const L=_(()=>{if(!a.value)return"";const e=a.value.name?.charAt(0)||"",t=a.value.surname?.charAt(0)||"";return(e+t).toUpperCase()});return(e,t)=>(i(),o("div",E,[a.value?(i(),o("div",I,[t[11]||(t[11]=s("div",{class:"account"},"–ú–æ–π –∞–∫–∫–∞—É–Ω—Ç",-1)),s("div",N,[s("div",{class:h(["wrapper__title_item",{selected:d.value==="favorites"}]),onClick:t[0]||(t[0]=n=>d.value="favorites")},[...t[2]||(t[2]=[s("svg",{width:"20",height:"19",viewBox:"0 0 20 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M14.5 0C17.5376 0 20 2.5 20 6C20 13 12.5 17 10 18.5C7.5 17 0 13 0 6C0 2.5 2.5 0 5.5 0C7.35997 0 9 1 10 2C11 1 12.64 0 14.5 0ZM10.9339 15.6038C11.8155 15.0485 12.61 14.4955 13.3549 13.9029C16.3337 11.533 18 8.9435 18 6C18 3.64076 16.463 2 14.5 2C13.4241 2 12.2593 2.56911 11.4142 3.41421L10 4.82843L8.5858 3.41421C7.74068 2.56911 6.5759 2 5.5 2C3.55906 2 2 3.6565 2 6C2 8.9435 3.66627 11.533 6.64514 13.9029C7.39 14.4955 8.1845 15.0485 9.0661 15.6038C9.3646 15.7919 9.6611 15.9729 10 16.1752C10.3389 15.9729 10.6354 15.7919 10.9339 15.6038Z",fill:"white"})],-1),s("span",null,"–ò–∑–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∏–ª—å–º—ã",-1)])],2),s("div",{class:h(["wrapper__title_item",{selected:d.value==="settings"}]),onClick:t[1]||(t[1]=n=>d.value="settings")},[...t[3]||(t[3]=[s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M16.5 3C19.5376 3 22 5.5 22 9C22 16 14.5 20 12 21.5C9.5 20 2 16 2 9C2 5.5 4.5 3 7.5 3C9.35997 3 11 4 12 5C13 4 14.64 3 16.5 3ZM12.9339 18.6038C13.8155 18.0485 14.61 17.4955 15.3549 16.9029C18.3337 14.533 20 11.9435 20 9C20 6.64076 18.463 5 16.5 5C15.4241 5 14.2593 5.56911 13.4142 6.41421L12 7.82843L10.5858 6.41421C9.74068 5.56911 8.5759 5 7.5 5C5.55906 5 4 6.6565 4 9C4 11.9435 5.66627 14.533 8.64514 16.9029C9.39 17.4955 10.1845 18.0485 11.0661 18.6038C11.3646 18.7919 11.6611 18.9729 12 19.1752C12.3389 18.9729 12.6354 18.7919 12.9339 18.6038Z",fill:"white"})],-1),s("span",null,"–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞",-1)])],2)]),d.value==="favorites"?(i(),o("div",S,[p.value.length>0?(i(),o("div",T,[(i(!0),o(H,null,Z(p.value,n=>(i(),o("div",{key:n.id,class:"favorite-movie-card",onClick:M=>f(n.id)},[s("div",j,[s("img",{src:n.posterUrl,alt:n.title,onError:k},null,40,z),s("button",{class:"remove-cross",onClick:U(M=>g(n.id),["stop"])},[...t[4]||(t[4]=[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M18 6L6 18",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),s("path",{d:"M6 6L18 18",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,D)])],8,$))),128))])):(i(),o("div",G,[t[5]||(t[5]=s("div",{class:"empty-icon"},"üé¨",-1)),t[6]||(t[6]=s("h3",null,"–ù–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ñ–∏–ª—å–º–æ–≤",-1)),t[7]||(t[7]=s("p",null,"–î–æ–±–∞–≤–ª—è–π—Ç–µ —Ñ–∏–ª—å–º—ã –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ, –Ω–∞–∂–∏–º–∞—è –Ω–∞ —Å–µ—Ä–¥–µ—á–∫–æ",-1)),s("button",{class:"browse-movies",onClick:m},"–ù–∞–π—Ç–∏ —Ñ–∏–ª—å–º—ã")]))])):C("",!0),d.value==="settings"?(i(),o("div",J,[s("div",O,[s("div",P,[s("div",R,[s("span",q,u(L.value),1)]),s("div",K,[t[8]||(t[8]=s("span",{class:"explain"},"–ò–º—è –∏ –§–∞–º–∏–ª–∏—è",-1)),w(" "+u(a.value.name)+" "+u(a.value.surname),1)])]),s("div",Q,[t[10]||(t[10]=s("div",{class:"user-avatar"},[s("svg",{class:"male",width:"22",height:"18",viewBox:"0 0 22 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M21 0C21.5523 0 22 0.44772 22 1V17.0066C22 17.5552 21.5447 18 21.0082 18H2.9918C2.44405 18 2 17.5551 2 17.0066V16H20V4.3L12 11.5L2 2.5V1C2 0.44772 2.44772 0 3 0H21ZM8 12V14H0V12H8ZM5 7V9H0V7H5ZM19.5659 2H4.43414L12 8.8093L19.5659 2Z",fill:"white"})])],-1)),s("div",W,[t[9]||(t[9]=s("span",{class:"explain"},"–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞",-1)),w(" "+u(a.value.email),1)])])])])):C("",!0)])):l.value?(i(),o("div",X," –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö... ")):(i(),o("div",Y," –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ")),s("button",{class:"out",onClick:y,disabled:l.value}," –í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞ ",8,ss)]))}}),is=A(ts,[["__scopeId","data-v-0c2092a8"]]);export{is as default};
